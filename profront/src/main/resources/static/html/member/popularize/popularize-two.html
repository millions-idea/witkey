<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>间接推荐人</title>
    <link rel="stylesheet" type="text/css" href="../../../dist/css/index-skin.css">
    <link rel="stylesheet" type="text/css" href="../../../dist/css/index-tp.css">

    <script type="text/javascript" src="../../../dist/js/lang.js"></script>
    <script type="text/javascript" src="../../../dist/js/config.js"></script>
    <script type="text/javascript" src="../../../dist/js/jquery-2.0.0.min.js"></script>
    <script type="text/javascript" src="../../../dist/js/common.js"></script>

    <script type="text/javascript" src="../../../dist/js/admin.js"></script>
    <script type="text/javascript" src="../../../dist/js/page.js"></script>

    <link rel="stylesheet" type="text/css" href="../../../dist/css/jq-tip.css">
    <script type="text/javascript" src="../../../dist/js/jq-tip.js"></script>
    <script type="text/javascript" src="../../../dist/js/layer.js"></script>

    <script type="text/javascript" src="../../../dist/js/jquery.form.js"></script>
    <script type="text/javascript" src="../../../dist/js/template7.min.js"></script>
    <script type="text/javascript" src="../../../dist/js/cm.js"></script>
    <script type="text/javascript" src="../../../dist/js/ypfunction.js"></script>
    <!--日期处理-->
    <script type="text/javascript" src="../../../dist/js/moment.js"></script>

    <link rel="stylesheet" href="http://001.topaaa.com/file/script/layim/css/layui.css">
    <!--配置服务器连接地址 -->
    <script type="text/javascript" src="../../../dist/js/gjy_serviceurl.js"></script>

    <script src="https://cdn.bootcss.com/react/16.4.0/umd/react.development.js"></script>
    <script src="https://cdn.bootcss.com/react-dom/16.4.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.bootcss.com/babel-standalone/6.26.0/babel.min.js"></script>


</head>

<body class="rwdt_bg">
<div id="body">
    <div id="body_header"></div>
    <script>
        $("#body_header").load("../public/public-top.html");
    </script>
    <div id="content_wrapper">
        <div id="content_body_title"></div>
        <script>
            $("#content_body_title").load("../public/public-body-title.html");
        </script>

        <div class="invite">
            <div class="invite1">
                <div class="guize">
                    <p>推广规则：通过推广链接注册成功后</p>
                    <p>发布或申请试用即为有效推广</p>
                </div>
                <div class="guize1">
                    <p>发布试用申请试用都有奖励</p>
                    <p>支持多级推广哦</p>
                </div>
                <div class="inviter_url open_url"></div>

                <input type="text" id="codes" class="zstglj" value="546546546"/>
                <div class="paihangbang" id="paihang">
                    <ul id="myTab" class="nav nav-tabs" style="display: flex;">
                        <li class="active"  style="flex: 1;">
                            <a href="#all" data-toggle="tab">$总排行$</a>
                        </li>
                        <li  style="flex: 1;">
                            <a href="#month" data-toggle="tab">$月排行$</a>
                        </li>
                        <li  style="flex: 1;">
                            <a href="#week" data-toggle="tab">$周排行$</a>
                        </li>
                    </ul>

                    <div id="myTabContent" class="tab-content">
                        <!--总排行-->
                        <div class="tab-pane fade in active" id="all">

                        </div>
                        <!--月排行-->
                        <div class="tab-pane fade" id="month">

                        </div>
                        <!--周排行-->
                        <div class="tab-pane fade" id="week">

                        </div>
                    </div>

                </div>
            </div>
        </div>
        <div id="ypcon">
            <style>
                .tr {
                    line-height: 24px
                }
            </style>
            <div class="menu">
                <table cellpadding="0" cellspacing="0">
                    <tbody>
                    <tr>
                        <td><a class="open_url"><span>推广链接</span></a></td>
                        <td><a class="" href="popularize.html"><span>直接推荐人</span></a>
                        </td>
                        <td>
                            <a class="sb0" href="javascript:;"><span>
                            间接推荐人</span>
                            </a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="yptip">
                <p><span><span style="color:#E53333;">后台说明</span><span style="color:#E53333;">：会员推荐会员，缴纳会费、发任务、接任务等操作，上级推荐人和上上级推荐人会获得分成奖励。平台支持二级推荐人。</span></span>
                </p>
                <p><span><span style="color:#E53333;">管理员可以分开设置商家和试客的推广奖励、接普通任务、接访问任务、</span><span
                        style="color:#E53333;">发普通任务、发访问任务，上级推荐人和上上级推荐人的奖励。</span></span></p>
                <p><span><span style="color:#E53333;">分站管理员也可以独立设置自己分站的奖励金额，这个设置和主站的设置是独立的。</span><br/></span></p></div>
            <div class="bd">
                <table cellpadding="1" cellspacing="0" class="tb" id="list_content">

                </table>
            </div>
            <div id="page" class="pages"></div>
        </div>
    </div>
    <script>
        $(function () {
            $(".open_url").click(function () {
                //复制内容到剪切板
                var Url2 = document.getElementById("codes");
                Url2.select(); // 选择对象
                document.execCommand("Copy"); // 执行浏览器复制命令
                alert("已复制完成，可贴粘。");

            });
            //set_nav("inviter", "on")
        });
    </script>
    <div style="clear:both;"></div>
    <div id="footer">
        <div id="footer_top">
            <div id="foot_top_1">
                <a href="/about/index.php?itemid=10">代理加盟</a><span>  |  </span>
                <a href="/about/index.php?itemid=9">辅助业务</a><span>  |  </span>
                <a href="/about/index.php?itemid=8">网站活动</a><span>  |  </span>
                <a href="/about/index.php?itemid=7">联系客服</a><span>  |  </span>
                <a href="/about/index.php?itemid=6">联盟网规</a><span>  |  </span>
                <a href="/about/index.php?itemid=1">关于我们</a><span>  |  </span>
                <a href="/about/index.php?itemid=3">联系方式</a><span>  |  </span>
                <a href="/about/index.php?itemid=4">使用协议</a><span>  |  </span>
                <a href="/about/index.php?itemid=5">版权隐私</a><span>  |  </span>
            </div>
            <div id="copy_right">
                (c)2013-2018 销量联盟 www.topaaa.com All Rights Reserved
            </div>
            <div style="width:1024px;text-align: center;margin: 20px auto 0;">
                <img src="http://001.topaaa.com/skin/ypmili/css/img/rz/1.png">
                <img src="http://001.topaaa.com/skin/ypmili/css/img/rz/2.png">
                <img src="http://001.topaaa.com/skin/ypmili/css/img/rz/3.png">
                <img src="http://001.topaaa.com/skin/ypmili/css/img/rz/4.png">
                <img src="http://001.topaaa.com/skin/ypmili/css/img/rz/5.png">
                <img src="http://001.topaaa.com/skin/ypmili/css/img/rz/6.png">
                <img src="http://001.topaaa.com/skin/ypmili/css/img/rz/7.png">
                <img src="http://001.topaaa.com/skin/ypmili/css/img/rz/8.png">
            </div>
            <div style="clear:both;"></div>
        </div>
    </div>
</div>
<div class="main-im">
    <div id="open_im" class="open-im" style="display: none;"></div>
    <div class="im_main" id="im_main">
        <div id="close_im" class="close-im"><a class="you" title="点击关闭" style="cursor: pointer"></a></div>
        <a onclick="multi_qq()" class="im-qq qq-a">
            <div class="qq-container"></div>
            <div class="qq-hover-c"><img class="img-qq" src="http://001.topaaa.com/skin/ypmili/css/img/qq.png"></div>
            <span>QQ在线咨询</span>
        </a>
        <script id="yptip_qq" type="text/template7">
            <p style="width:100%;background-color:#0098ff;font-size:16px;text-align:center;color:#fff;height:34px;line-height:34px;">
                客服团队</p><p style="line-height:40px;">客服潇潇：<a target="_blank"
                                                             href="http://wpa.qq.com/msgrd?v=3&uin=261369834&site=qq&menu=yes"><img
                    border="0" src="http://wpa.qq.com/pa?p=2:261369834:51" alt="点击这里给我发消息" title="点击这里给我发消息"/></a> <span
                    style="line-height:1.5;margin-left:10px;">客服靓靓：</span><a target="_blank"
                                                                             href="http://wpa.qq.com/msgrd?v=3&uin=261369834&site=qq&menu=yes"
                                                                             style="line-height:1.5;"><img border="0"
                                                                                                           src="http://wpa.qq.com/pa?p=2:261369834:51"
                                                                                                           alt="点击这里给我发消息"
                                                                                                           title="点击这里给我发消息"/></a>
            </p><p style="line-height:30px;">客服恋恋：<a target="_blank"
                                                     href="http://wpa.qq.com/msgrd?v=3&uin=261369834&site=qq&menu=yes"><img
                    border="0" src="http://wpa.qq.com/pa?p=2:261369834:51" alt="点击这里给我发消息" title="点击这里给我发消息"/></a> <span
                    style="line-height:1.5;margin-left:10px;">客服萌萌：</span><a target="_blank"
                                                                             href="http://wpa.qq.com/msgrd?v=3&uin=261369834&site=qq&menu=yes"
                                                                             style="line-height:1.5;"><img border="0"
                                                                                                           src="http://wpa.qq.com/pa?p=2:261369834:51"
                                                                                                           alt="点击这里给我发消息"
                                                                                                           title="点击这里给我发消息"/></a>
            </p><p><br/></p><p
                    style="width:100%;background-color:#0098ff;font-size:16px;text-align:center;color:#fff;height:34px;line-height:34px;">
                合作渠道</p><p style="line-height:40px;">业务合作：<a target="_blank"
                                                             href="http://wpa.qq.com/msgrd?v=3&uin=261369834&site=qq&menu=yes"><img
                    border="0" src="http://wpa.qq.com/pa?p=2:261369834:51" alt="点击这里给我发消息" title="点击这里给我发消息"/></a> <span
                    style="line-height:1.5;margin-left:10px;">代理加盟：</span><a target="_blank"
                                                                             href="http://wpa.qq.com/msgrd?v=3&uin=261369834&site=qq&menu=yes"
                                                                             style="line-height:1.5;"><img border="0"
                                                                                                           src="http://wpa.qq.com/pa?p=2:261369834:51"
                                                                                                           alt="点击这里给我发消息"
                                                                                                           title="点击这里给我发消息"/></a>
            </p>        </script>
        <script>
            function multi_qq() {
                $('.layim-friend618').click();
            }
        </script>
        <a href="/app.php" target="_blank" class="qq-a" style="height: 130px">
            <div class="qq-container" style="height: 130px"></div>
            <div style="width: 95px;height: 95px"><img class="img-qq"
                                                       src="/api/qrcode.php?url=http%3A%2F%2F001.topaaa.com%2Fapp.php"
                                                       style="width: 95px;height: 95px;max-width: 95px;top: 5px;left: 5px">
            </div>
            <span>下载APP</span>
        </a>
        <div class="im-tel">
            <div><a href="/announce/index.php?typeid=2" target="_blank">如何发布试用</a></div>
            <div><a href="/announce/index.php?typeid=3" target="_blank">如何申请试用</a></div>
            <div><a href="/about/index.php?itemid=6" target="_blank">销量联盟网规</a></div>
            <div><a href="/announce/index.php?typeid=1" target="_blank" class="jsbz">网站公告</a></div>
        </div>
        <div class="im-footer" style="position:relative">
            <div class="go-top"><a class="you" title="返回顶部" style="cursor: pointer"></a></div>
            <div style="clear:both"></div>
        </div>
    </div>
    <script type="text/babel">

        $(function () {
            $('#myTab li:eq(2) a').tab('show');
        });

        //排行组件
        class InviteList extends React.Component {
            constructor(props) {
                super(props)
            }

            render () {
                var datas = this.props.list;
                return (
                    <table>
                        <tbody>
                        <tr className="wrap_flex">
                            <td className="flex_mid"> 排名</td>
                            <td className="flex_mid">用户名</td>
                            <td className="flex_mid">推广人数</td>
                            <td className="flex_mid"> 获得联盟币</td>
                        </tr>
                        {
                            datas.map(function (name, index) {
                                return (
                                    <tr
                                        key={index}
                                        align="center">
                                        <tr className="wrap_flex">
                                            <td className="flex_mid">{index+1}</td>
                                            <td className="flex_mid">{name.username}</td>
                                            <td className="flex_mid">{name.pep_count}</td>
                                            <td className="flex_mid">1.00</td>
                                        </tr>
                                    </tr>
                                )
                            })
                        }
                        </tbody>
                    </table>
                )
            }
        }

        $(function () {
            $.ajax({
                url: request_url + "intf_member/loadInviteByWeek",
                type: "get",
                dataType: 'json',
                success: function (result) {
                    //下线列表
                    var datas = jQuery.parseJSON(result.list);
                    // 周排行渲染
                    ReactDOM.render(<InviteList list={datas}/>, document.getElementById('week'))
                }
            });

            $.ajax({
                url: request_url + "intf_member/loadInviteByMonth",
                type: "get",
                dataType: 'json',
                success: function (result) {
                    //下线列表
                    var datas = jQuery.parseJSON(result.list);
                    // 月排行渲染
                    ReactDOM.render(<InviteList list={datas}/>, document.getElementById('month'))
                }
            });

            $.ajax({
                url: request_url + "intf_member/loadInviteByMonth",
                type: "get",
                dataType: 'json',
                success: function (result) {
                    //下线列表
                    var datas = jQuery.parseJSON(result.list);
                    // 总排行渲染
                    ReactDOM.render(<InviteList list={datas}/>, document.getElementById('all'))
                }
            });
        });
    </script>
</div>
</body>
</html>
<script type="text/babel">
    $(function () {
        $("#codes").val("localhost:8081/html/member/welcome/register.html?uid=" + userresult_json.id);

        //请求一级列表
        let params = {};
        params.memid = userresult_json.id;

        $.ajax({
            url: request_url + "intf_member/loadSecondInviteList",
            type: "post",
            data: params,
            dataType: 'json',
            headers: {
                "mobile": userresult_json.mobile,
                "token": userresult_json.token
            },
            success: function (result) {
                if (result.error == 0) {
                    //下线列表
                    var datas = jQuery.parseJSON(result.list);

                    for (let i = 0; i < datas.length; i++) {
                        let org_time = datas[i].regist_time;
                        datas[i].regist_time =
                            moment(org_time, 'MMM DD,YYYY HH:mm:ss A', 'en').format('YYYY-MM-DD HH:mm:ss');
                    }

                    var lis = [];
                    lis.push(
                        <tr>
                            <th>会员组</th>
                            <th>用户名</th>
                            <th>姓名</th>
                            <th>是否缴费</th>
                            <th>性别</th>
                            <th>注册时间</th>
                            <th>登陆次数</th>
                            <th>完成试用数</th>
                        </tr>
                    );
                    datas.forEach((data, index) => lis.push(
                        <tr
                            key={index}
                            align="center">
                            <td height="30" className="px11">试客会员</td>
                            <td className="px11 ">{data.username}</td>
                            <td className="px11 ">{data.real_name}</td>
                            <td className="">否</td>
                            <td className="px11">{data.gender}</td>
                            <td className="px11 f_gray">
                                {data.regist_time}
                            </td>
                            <td className="px11 f_gray">{data.loin_count}</td>
                            <td><span style={{color: '#0000ff'}}>0</span></td>
                        </tr>
                    ));
                    lis.push(
                        <tr align="center">
                            <td height="35"><strong>小计</strong></td>
                            <td className="px11 f_red"></td>
                            <td colSpan="6">&nbsp;</td>
                        </tr>
                    );
                    const ul = <tbody>{lis}</tbody>;

                    // 渲染虚拟DOM
                    ReactDOM.render(ul, document.getElementById('list_content'))

                } else {
                    alert(result.message);
                }
            }
        });
    })
</script>
